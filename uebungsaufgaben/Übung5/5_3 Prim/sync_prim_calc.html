<!DOCTYPE html>
<html>
    <head>
        <style>
            #myProgress {
                    width: 100%;
                    background-color: grey;
            }

            #myBar {
                width: 1%;
                height: 30px;
                background-color: green;
            }
        </style>
    </head>
    <body>
        <h1>Primzahlen:</h1>
        <h2 style="display: inline;">Letzte Primzahl: </h2><h2 id="prim_number"></h2>

        <div id="myProgress">
            <div id="myBar"></div>
          </div>



        <script>

            // synchrone Primzahlberechnung 
            function isPrim(number){
                for(var i = BigInt(2); i < number; i++){
                    if(number % i === BigInt(0)) {return false};
                }
                return true;
            }

            //bar
            var i = 0;
            function move_bar() { 
                i++;
                if (i > 100) {
                    i = 0;
                }
                var elem = document.getElementById("myBar");
                elem.style.width = i + "%";
            }
            
                

            //Ab ca 200.000 kann man die Ruckler gut sehen.
            async function run(){
                var current =BigInt(3); //200000
                while(true){
                    move_bar();
                    await new Promise(r => setTimeout(r, 16));  //16ms -> 60Hz render refresh rate kann ggf ruckeln
                    if(isPrim(current)){
                        document.getElementById("prim_number").innerHTML= current;
                        console.log(current);
                    }
                    current++;
                }
            }
            run();


        </script>
    </body>
</html>